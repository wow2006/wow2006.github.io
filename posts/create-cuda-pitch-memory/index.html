<!DOCTYPE html>
<html prefix="" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Create CUDA pitch memory | Salt and Pepper</title>
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../../assets/css/screen.css">
<link rel="stylesheet" type="text/css" href="../../assets/css/nav.css">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400%7CInconsolata">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://wow2006.github.io/posts/create-cuda-pitch-memory/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Ahmed Abdel Aal">
<link rel="prev" href="../singleton-design-pattern/singleton-design-pattern/" title="Singleton Design Pattern" type="text/html">
<link rel="next" href="../save-opengl-frame-to-image/save-opengl-frame/" title="Save OpenGL frame to image" type="text/html">
<meta property="og:site_name" content="Salt and Pepper">
<meta property="og:title" content="Create CUDA pitch memory">
<meta property="og:url" content="https://wow2006.github.io/posts/create-cuda-pitch-memory/">
<meta property="og:description" content="I want to Create memory pitch.
CUDA runtime API:
constepxr auto width  = 2752u;
constexpr auto height = 2200u
float* pDeviceMemory = nullptr;

const auto result = cudaMallocPitch(&amp;pDeviceMemory, &amp;pitc">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-11-20T10:58:27+02:00">
</head>
<body class="nav-closed">

<div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
<li class="nav-opened" role="presentation">
                <a href="../../pages/projects/">Projects</a>
            </li>
            <li class="nav-opened" role="presentation">
                <a href="../../pages/resume/">Resume</a>
            </li>
            <li class="nav-opened" role="presentation">
                <a href="../../archive.html">Archive</a>
            </li>
            <li class="nav-opened" role="presentation">
                <a href="../../categories/">Tags</a>
            </li>
    
    
    </ul>
</div>
<span class="nav-cover"></span>

<div class="site-wrapper">
    <header class="main-header post-head no-cover"><nav class="main-nav overlay clearfix"><a class="blog-logo" href="https://wow2006.github.io/"><img src="https://getnikola.com/assets/img/logo.svg" alt="Blog Logo"></a>
            <a class="menu-button" href="#"><span class="burger">☰</span><span class="word">Menu</span></a>
        </nav></header><main id="content" class="content" role="main"><article class="post post"><header class="post-header"><h1 class="post-title">Create CUDA pitch memory</h1>
        <section class="post-meta"> by
            Ahmed Abdel Aal
            on
            <time class="post-date" datetime="2019-11-20T10:58:27+02:00">
                2019-11-20 10:58
            </time></section></header><section class="post-content"><div>
<p>I want to Create memory pitch.</p>
<h5>CUDA runtime API:</h5>
<pre class="code literal-block"><span></span><span class="n">constepxr</span> <span class="k">auto</span> <span class="n">width</span>  <span class="o">=</span> <span class="mi">2752u</span><span class="p">;</span>
<span class="k">constexpr</span> <span class="k">auto</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">2200u</span>
<span class="kt">float</span><span class="o">*</span> <span class="n">pDeviceMemory</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>

<span class="k">const</span> <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">cudaMallocPitch</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pDeviceMemory</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pitch</span><span class="p">,</span>
                        <span class="n">width</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">),</span> <span class="n">height</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">cudaSuccess</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Error: "</span> <span class="o">&lt;&lt;</span> <span class="p">...;</span>
<span class="p">}</span>
</pre>


<h5>CUDA driver API:</h5>
<pre class="code literal-block"><span></span><span class="n">constepxr</span> <span class="k">auto</span> <span class="n">width</span>  <span class="o">=</span> <span class="mi">2752u</span><span class="p">;</span>
<span class="k">constexpr</span> <span class="k">auto</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">2200u</span>
<span class="kt">size_t</span> <span class="n">pitch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">CUdrevice</span> <span class="n">device</span><span class="p">;</span>
<span class="k">const</span> <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">cuMemAllocPitch</span><span class="p">(</span><span class="o">&amp;</span><span class="n">device</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pitch</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">!=</span> <span class="n">CUDA_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Error: "</span> <span class="o">&lt;&lt;</span> <span class="p">...;</span>
<span class="p">}</span>
</pre>


<p>I want set GPU memory to zero values.</p>
<h5>CUDA runtime API:</h5>
<pre class="code literal-block"><span></span><span class="kt">float</span>    <span class="o">*</span><span class="n">pDevice</span>    <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
<span class="kt">size_t</span>   <span class="n">devicePitch</span> <span class="o">=</span> <span class="p">...;</span>
<span class="kt">uint32_t</span> <span class="n">width</span>       <span class="o">=</span> <span class="p">...;</span>
<span class="kt">uint32_t</span> <span class="n">height</span>      <span class="o">=</span> <span class="p">...;</span>

<span class="k">const</span> <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">cudaMemset2D</span><span class="p">(</span><span class="n">pDevice</span><span class="p">,</span> <span class="n">devicePitch</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                 <span class="n">width</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">),</span>
                                 <span class="n">height</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="n">result</span> <span class="o">!=</span> <span class="n">CUDA_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"ERROR:"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
<span class="p">}</span>
</pre>


<h5>CUDA driver API:</h5>
<pre class="code literal-block"><span></span><span class="c1">// TODO(Hussein): make sure</span>
<span class="n">constepxr</span> <span class="k">auto</span> <span class="n">width</span>  <span class="o">=</span> <span class="mi">2752u</span><span class="p">;</span>
<span class="k">constexpr</span> <span class="k">auto</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">2200u</span>
<span class="kt">size_t</span> <span class="n">pitch</span> <span class="o">=</span> <span class="p">...;</span>
<span class="n">CUdrevice</span> <span class="n">device</span><span class="p">;</span>
<span class="k">const</span> <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">cuMemsetD2D32</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span>
                                  <span class="n">height</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">!=</span> <span class="n">CUDA_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Error: "</span> <span class="o">&lt;&lt;</span> <span class="p">...;</span>
<span class="p">}</span>
</pre>
</div>
    </section><footer class="post-footer"></footer></article></main><footer class="site-footer clearfix"><section class="poweredby">Contents © 2020         <a href="mailto:eng.ahmedhussein89@gmail.com">Ahmed Abdel Aal</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </section></footer>
</div>

    <script type="text/javascript" src="../../assets/js/jquery.js"></script><script type="text/javascript" src="../../assets/js/jquery.fitvids.js"></script><script type="text/javascript" src="../../assets/js/index.js"></script>
</body>
</html>
